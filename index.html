<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZeroX - Home</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="sidebarNav" class="sidebar">
    <div class="menu-toggle" onclick="toggleSidebar()">☰</div>
    <div class="menu-links" id="menuLinks">
      <a href="/profile">👤 <span data-t="profile">Profile</span></a>
      <a href="/friends">🤝 <span data-t="friends">Friends</span></a>
      <a href="/login">🔐 <span data-t="login">Login</span></a>
      <div style="margin-top:10px;">
        <label style="color:white;"><span data-t="language">🌐 Language:</span></label>
        <select id="languageSelect" onchange="setLanguage(this.value)">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="fr">Français</option>
          <option value="de">Deutsch</option>
          <option value="ar">العربية</option>
        </select>
      </div>
    </div>
  </div>

  <div class="container">
    <h1>ZeroX</h1>
    <p>Chat anonymously with strangers around the world.</p>

    <form id="preferenceForm">
      <label>Gender:</label>
      <select id="gender">
        <option value="any">Any</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select><br><br>

      <label>Interest:</label>
      <input type="text" id="interest" placeholder="e.g., gaming, music"><br><br>

      <label><input type="checkbox" id="friendOnly"> Friend-Only Chat</label><br><br>

      <div class="button-group">
        <button type="submit" data-mode="text">Start Text Chat</button>
        <button type="submit" data-mode="video">Start Video Chat</button>
      </div>
    </form>
  </div>

  <script>
    function toggleSidebar() {
      document.getElementById("menuLinks").classList.toggle("show");
    }
    const lang = localStorage.getItem("lang");
    if (lang) document.getElementById("languageSelect").value = lang;

    function setLanguage(lang) {
      localStorage.setItem("lang", lang);
      location.reload();
    }

    const form = document.getElementById("preferenceForm");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const gender = document.getElementById("gender").value;
      const interest = document.getElementById("interest").value;
      const friendOnly = document.getElementById("friendOnly").checked;
      const mode = e.submitter.getAttribute("data-mode");
      localStorage.setItem("gender", gender);
      localStorage.setItem("interest", interest);
      localStorage.setItem("friendOnly", friendOnly);
      window.location.href = `chat.html?mode=${mode}&friendOnly=${friendOnly}`;
    });
  </script>
</body>
</html>
